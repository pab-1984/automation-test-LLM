# Archivo: tests/suites/ecommerce-suite.yml

suite: "Funcionalidad Principal de E-commerce"
description: "Pruebas del flujo de compra básico"
baseUrl: "http://localhost:3000"
timeout: 10000
mode: "auto"  # Modo automático por defecto

# Casos de prueba
tests:
  - name: "TC001 - La página de productos se carga (Modo Directo)"
    mode: "direct"  # Ejecución rápida sin IA
    steps:
      - action: "navigate"
        url: "${baseUrl}/"
        description: "Navegar a la página principal"
      
      - action: "waitForSelector"
        selector: "h1"
        timeout: 5000
      
      - action: "verifyElementText"
        selector: "h1"
        expectedPatterns:
          - "Products"

      - action: "verifyElementExists"
        selectors:
          - ".card"
          - "button.btn-primary"
      
      - action: "screenshot"
        filename: "tc001-productos-directo"
    
    expectedResult: "La página de productos se carga correctamente en modo directo"

  - name: "TC002 - Análisis Inteligente del Catálogo"
    mode: "llm"  # Usa inteligencia artificial
    steps:
      - action: "navigate"
        url: "${baseUrl}/"
        description: "Navegar a la página principal"
      
      - action: "analyzePage"
        description: "Analizar contenido del catálogo con IA"
        intelligent: true
      
      - action: "screenshot"
        filename: "tc002-analisis-ia"
    
    expectedResult: "La página se analiza usando inteligencia artificial para identificar productos"

  - name: "TC003 - Flujo Completo de Compra (Modo Automático)"
    mode: "auto"  # Modo inteligente: usa IA cuando sea necesario
    steps:
      - action: "navigate"
        url: "${baseUrl}/"
        description: "Navegar a la página principal"
      
      - action: "waitForSelector"
        selector: "h1"
        timeout: 5000
      
      - action: "analyzePage"  # Este paso usará IA automáticamente
        description: "Analizar productos destacados"
        intelligent: true
      
      - action: "click"
        selector: ".card:first-of-type button"
        description: "Añadir el primer producto al carrito"

      - action: "waitForSelector"
        selector: ".badge"
      
      - action: "verifyElementText"
        selector: ".badge"
        expectedPatterns:
          - "1"
      
      - action: "screenshot"
        filename: "tc003-flujo-completo"
    
    expectedResult: "El flujo completo de compra funciona correctamente con asistencia de IA"
